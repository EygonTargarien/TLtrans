(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{121:function(e,t,a){"use strict";function s(e){return'\n\t\t<li class="calc__elem" data-elem=\'{"key":"'+e.key+'","name":"'+e.name+'","img":"'+e.img+"\"}'>\t\t\t\t\t\t\t\t\t\t\t\t\t<span>"+e.name+"</span>\n\t\t</li>\n\t"}function n(e,t){var a="";return e.forEach(function(e,s){var n=$("[data-area][data-type="+e+"]").data("key");n&&(a+=n,console.log(),c.sendObj.services[t]=[])}),a}function i(e){$(".js-price").text(Math.round(e)),$(".js-priceOld").text(Math.round(.9*e)),$(".js-priceDM").text(Math.round(10*e)),c.sendObj.cost=Math.round(e)}function o(){var e=1;return $(".js-factor").each(function(t,a){var s=$(a);s.prop("checked")&&(e+=+s.val())}),e}Object.defineProperty(t,"__esModule",{value:!0});var c={defaultConfig:{wrapClass:"[data-calc]"},init:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this;this.gameConfig={},this.$container=e,this.config=$.extend(this,{},this.defaultClass,t),this.sendObj={currency:this.config.currency},$.ajax({url:this.config.gameConfigPath,type:"POST",dataType:"json",data:null,success:function(e){a.gameConfig=e},error:function(e,t,a){alert("Error "+a)}}),this.$container.on("click","[data-area]",function(){$(this).closest(".js-select").find(".js-selectCnt").addClass("has-active")}).on("mouseleave",".js-selectCnt",function(){$(this).removeClass("has-active")}).on("change",".js-factor",function(){var e=a.calculate(a.config.preset);i(e*=o()+$(".js-discount").data("factor"))}).on("click",".js-discountBtn",function(){var e=$(this).closest(".js-discount").find(".js-discountArea");$.ajax({url:a.config.discountPath,type:"POST",dataType:"json",data:{dicountKey:e.val()},success:function(e){if(console.log(e),e.success){$(".js-discount").data("factor",e.discountVal),a.sendObj.discount=e.discoundKey,$(".js-discountSuccess").text(e.discountText).slideDown(300),$(".js-discountForm").slideUp(300);var t=a.calculate(a.config.preset);i(t*=o()+$(".js-discount").data("factor"))}else $(".js-discountError").slideDown(),setTimeout(function(){$(".js-discountError").slideUp()},2500)},error:function(e,t,a){alert("Error "+a)}})}).on("click","[data-elem]",function(){var e=$(this),t=e.closest(".js-select"),n=t.closest(".js-selectList"),c=t.find(".js-selectCnt"),r=n.find(".js-img"),d=t.find("[data-area]"),l=e.data("elem");d.text(l.name),c.removeClass("has-active"),d.data("key",l.key),t.removeClass("has-error"),l.img?r.attr("src",l.img):r.attr("src",a.config.imgDefault);var u=d.data("area");u.openDisabled&&u.openDisabled.forEach(function(e,t){var i,o=a.gameConfig.tier[l.key][e],c=n.find("[data-disabled="+e+"]"),r=c.find(".js-elemList");if((i=c.find("[data-area]")).data("key",null),i.text(i.data("area").defaulName),c.find(".js-select").removeClass("has-error"),!o)return c.slideUp(300).addClass("has-disabled"),r.html(),!1;!function(e,t,a){switch(e){case"division":t.html((n=s,i=[],a.forEach(function(e,t){var a=n(e);i.push(a)}),i));break;default:console.warn("Укажите тип , в атрибуте data-modal")}var n,i}(e,r,o),c.slideDown(300).removeClass("has-disabled")});var f=a.calculate(a.config.preset);(f*=o()+$(".js-discount").data("factor"))?($(".js-mainError").slideUp(300),i(f),$(".js-totalWrap").slideDown(300)):($(".js-mainError").slideDown(300),$(".js-totalWrap").slideUp(300))}).on("click",".js-send",function(){if(e=!0,$("[data-area]").each(function(t,a){var s=$(a),n=s.closest(".js-select"),i=s.closest("[data-disabled]").hasClass("has-disabled")||!1;s.data("key")||i||(console.log("check status"),n.addClass("has-error"),e=!1)}),console.log(e),!e)return!1;var e;console.log(a.sendObj)})},calculate:function(e){var t=void 0;switch(e){case"lolLeagueBoosting":t=function(e,t){var a=c.gameConfig.priceList,s=void 0,n=void 0,i=0;a.forEach(function(a,i){a.key==e&&(s=i),a.key==t&&(n=i)});for(var o=s+1;o<=n;o++)i+=a[o].price;return i}(n(["currentTier","currentDivision"],"currentKey"),n(["desiredTier","desiredDevision"],"desiredKey"));break;default:console.warn("need preset")}return t}};t.default=c},20:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loaderInit=void 0;var s,n=a(121),i=(s=n)&&s.__esModule?s:{default:s};t.loaderInit=function(e,t){i.default.init(e,e.data("calc"))}}}]);